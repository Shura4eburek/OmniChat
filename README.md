# OmniChat

Fabric мод для Minecraft, добавляющий голосовую озвучку чата (TTS) с пространственным звуком и визуальные облачка сообщений над головами игроков.

## Возможности

- **Text-to-Speech** — сообщения в чате автоматически озвучиваются
- **Пространственный звук** — голос идёт из позиции игрока-отправителя, громкость зависит от расстояния
- **Несколько TTS-движков** — sherpa-onnx (VITS, мультиспикер) и GLaDOS (TeraTTS g2p-vits)
- **Облачка чата** — текст сообщений отображается над головой игрока с плавным появлением и переносом по словам
- **Индикатор набора** — анимированные точки `...` над головой игрока, когда он печатает в чат
- **Выбор голоса** — каждый игрок может выбрать себе модель и голос, настройки сохраняются на сервере
- **Раздача моделей** — сервер автоматически отправляет TTS-модели клиентам, у которых их нет
- **Экран настроек** — переключение TTS, громкость, скорость речи, выбор модели, облачка чата

## Требования

- Minecraft **1.21.11**
- Fabric Loader **0.18.4+**
- Fabric API
- Java **21+**

## Установка

1. Установите [Fabric Loader](https://fabricmc.net/use/installer/) для Minecraft 1.21.11
2. Скачайте [Fabric API](https://modrinth.com/mod/fabric-api) и поместите в папку `mods/`
3. Скачайте JAR мода из [Releases](https://github.com/Shura4eburek/OmniChat/releases) и поместите в папку `mods/`
4. Поместите TTS-модели в `config/omnichat/models/<имя_модели>/` (файлы `.onnx` + `tokens.txt`)

## TTS-модели

Мод поддерживает два типа моделей:

| Тип | Определение | Формат |
|-----|-------------|--------|
| **sherpa-onnx VITS** | Нет `dictionary.txt` в папке модели | `.onnx` + `tokens.txt` |
| **GLaDOS (TeraTTS)** | Есть `dictionary.txt` в папке модели | `.onnx` + `config.json` + `dictionary.txt` |

Тип определяется автоматически по наличию файла `dictionary.txt`.

## Сборка из исходников

```bash
git clone https://github.com/Shura4eburek/OmniChat.git
cd OmniChat
./gradlew build
```

Собранный JAR будет в `build/libs/`.

## Горячие клавиши

Настройки мода доступны через меню управления клавишами Minecraft (раздел OmniChat).

## Конфигурация

Файл конфигурации: `config/omnichat/config.json`

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| `enabled` | boolean | `true` | Включить/выключить TTS |
| `volume` | float | `1.0` | Громкость озвучки |
| `speed` | float | `1.0` | Скорость речи |
| `modelPath` | string | — | Имя папки модели |
| `readOwnMessages` | boolean | `false` | Озвучивать собственные сообщения |
| `showChatBubbles` | boolean | `true` | Показывать облачка чата |
| `bubbleTextSpeed` | float | `30.0` | Скорость появления текста в облачке (символов/сек, 0 = мгновенно) |

## Лицензия

All Rights Reserved. См. [LICENSE.txt](LICENSE.txt).
